!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("clone"),require("d3-ease"),require("d3-hierarchy"),require("prop-types"),require("core-js/fn/array/find"),require("core-js/fn/object/assign")):"function"==typeof define&&define.amd?define(["react","clone","d3-ease","d3-hierarchy","prop-types","core-js/fn/array/find","core-js/fn/object/assign"],t):"object"==typeof exports?exports["react-tree-graph"]=t(require("react"),require("clone"),require("d3-ease"),require("d3-hierarchy"),require("prop-types"),require("core-js/fn/array/find"),require("core-js/fn/object/assign")):e["react-tree-graph"]=t(e.react,e.clone,e["d3-ease"],e["d3-hierarchy"],e["prop-types"],e["core-js/fn/array/find"],e["core-js/fn/object/assign"])}("undefined"!=typeof self?self:this,function(e,t,r,n,o,i,s){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){e.exports=o},function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(3);var n=r(4),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=o.default},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(5),p=n(u),c=r(6),l=r(7),f=r(0),d=n(f),h=r(1),y=n(h),b=r(8),g=n(b),m={data:d.default.object.isRequired,animated:d.default.bool.isRequired,duration:d.default.number.isRequired,easing:d.default.func.isRequired,steps:d.default.number.isRequired,height:d.default.number.isRequired,width:d.default.number.isRequired,keyProp:d.default.string.isRequired,labelProp:d.default.string.isRequired,getChildren:d.default.func.isRequired,margins:d.default.shape({bottom:d.default.number.isRequired,left:d.default.number.isRequired,right:d.default.number.isRequired,top:d.default.number.isRequired}).isRequired,nodeOffset:d.default.number.isRequired,nodeRadius:d.default.number.isRequired,circleProps:d.default.object.isRequired,gProps:d.default.object.isRequired,pathProps:d.default.object.isRequired,svgProps:d.default.object.isRequired,textProps:d.default.object.isRequired},P={animated:!1,duration:500,easing:c.easeQuadOut,getChildren:function(e){return e.children},steps:20,keyProp:"name",labelProp:"name",margins:{bottom:10,left:20,right:150,top:10},nodeOffset:3.5,nodeRadius:5,circleProps:{},gProps:{className:"node"},pathProps:{className:"link"},svgProps:{},textProps:{}},v=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"render",value:function(){var e=this,t=this.props.width-this.props.margins.left-this.props.margins.right,r=this.props.height-this.props.margins.top-this.props.margins.bottom,n=(0,l.hierarchy)((0,p.default)(this.props.data),this.props.getChildren),o=(0,l.tree)().size([r,t])(n),i=o.descendants(),s=o.links();return i.forEach(function(t){t.y+=e.props.margins.top}),y.default.createElement(g.default,{animated:this.props.animated,duration:this.props.duration,easing:this.props.easing,getChildren:this.props.getChildren,height:this.props.height,keyProp:this.props.keyProp,labelProp:this.props.labelProp,links:s,nodes:i,nodeOffset:this.props.nodeOffset,nodeRadius:this.props.nodeRadius,steps:this.props.steps,width:this.props.width,circleProps:this.props.circleProps,gProps:this.props.gProps,pathProps:this.props.pathProps,svgProps:this.props.svgProps,textProps:this.props.textProps})}}]),t}(y.default.PureComponent);t.default=v,v.propTypes=m,v.defaultProps=P},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(9),r(10);var p=r(0),c=n(p),l=r(1),f=n(l),d=r(11),h=n(d),y={animated:c.default.bool.isRequired,getChildren:c.default.func.isRequired,keyProp:c.default.string.isRequired,links:c.default.array.isRequired,nodes:c.default.array.isRequired,duration:c.default.number.isRequired,easing:c.default.func.isRequired,steps:c.default.number.isRequired},b=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(e.animated){var n=e.nodes[0].x,s=e.nodes[0].y;r.state={nodes:e.nodes.map(function(e){return Object.assign({},e,{x:n,y:s})}),links:e.links.map(function(e){return{source:Object.assign({},e.source,{x:n,y:s}),target:Object.assign({},e.target,{x:n,y:s})}})}}else r.state={nodes:e.nodes,links:e.links};return r}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.animated&&this.animate(this.props)}},{key:"componentWillReceiveProps",value:function(e){if(e.nodes!==this.props.nodes||e.links!==this.props.links)return e.animated?void this.animate(e):void this.setState({nodes:e.nodes,links:e.links})}},{key:"animate",value:function(e){var t=this;clearInterval(this.animation);var r=0,n=this.getAnimationContext(this.state,e);this.animation=setInterval(function(){if(++r===e.steps)return clearInterval(t.animation),t.animation=null,void t.setState({nodes:e.nodes,links:e.links});t.setState(t.calculateNewState(n,r/e.steps))},e.duration/e.steps)}},{key:"getAnimationContext",value:function(e,t){var r=this,n=t.nodes.filter(function(t){return e.nodes.every(function(e){return!r.areNodesSame(t,e)})}).map(function(n){return{base:n,old:r.getClosestAncestor(n,t,e),new:n}}),o=t.nodes.filter(function(t){return e.nodes.some(function(e){return r.areNodesSame(t,e)})}).map(function(t){return{base:t,old:e.nodes.find(function(e){return r.areNodesSame(t,e)}),new:t}}),i=e.nodes.filter(function(e){return t.nodes.every(function(t){return!r.areNodesSame(e,t)})}).map(function(n){return{base:n,old:n,new:r.getClosestAncestor(n,e,t)}}),s=t.links.filter(function(t){return e.links.every(function(e){return!r.areLinksSame(t,e)})}).map(function(n){return{base:n,old:r.getClosestAncestor(n.target,t,e),new:n}}),a=t.links.filter(function(t){return e.links.some(function(e){return r.areLinksSame(t,e)})}).map(function(t){return{base:t,old:e.links.find(function(e){return r.areLinksSame(t,e)}),new:t}}),u=e.links.filter(function(e){return t.links.every(function(t){return!r.areLinksSame(e,t)})}).map(function(n){return{base:n,old:n,new:r.getClosestAncestor(n.target,e,t)}});return{nodes:o.concat(n).concat(i),links:a.concat(s).concat(u)}}},{key:"getClosestAncestor",value:function(e,t,r){for(var n=this,o=e;o;){var i=r.nodes.find(function(e){return n.areNodesSame(o,e)});if(i)return i;o=t.nodes.find(function(e){return(n.props.getChildren(e)||[]).some(function(e){return n.areNodesSame(o,e)})})}return r.nodes[0]}},{key:"areNodesSame",value:function(e,t){return e.data[this.props.keyProp]===t.data[this.props.keyProp]}},{key:"areLinksSame",value:function(e,t){return e.source.data[this.props.keyProp]===t.source.data[this.props.keyProp]&&e.target.data[this.props.keyProp]===t.target.data[this.props.keyProp]}},{key:"calculateNewState",value:function(e,t){var r=this;return{nodes:e.nodes.map(function(e){return r.calculateNodePosition(e.base,e.old,e.new,t)}),links:e.links.map(function(e){return r.calculateLinkPosition(e.base,e.old,e.new,t)})}}},{key:"calculateNodePosition",value:function(e,t,r,n){return Object.assign({},e,{x:this.calculateNewValue(t.x,r.x,n),y:this.calculateNewValue(t.y,r.y,n)})}},{key:"calculateLinkPosition",value:function(e,t,r,n){return{source:Object.assign({},e.source,{x:this.calculateNewValue(t.source?t.source.x:t.x,r.source?r.source.x:r.x,n),y:this.calculateNewValue(t.source?t.source.y:t.y,r.source?r.source.y:r.y,n)}),target:Object.assign({},e.target,{x:this.calculateNewValue(t.target?t.target.x:t.x,r.target?r.target.x:r.x,n),y:this.calculateNewValue(t.target?t.target.y:t.y,r.target?r.target.y:r.y,n)})}}},{key:"calculateNewValue",value:function(e,t,r){return e+(t-e)*this.props.easing(r)}},{key:"render",value:function(){return f.default.createElement(h.default,a({},this.props,this.state))}}]),t}(f.default.PureComponent);t.default=b,b.propTypes=y},function(e,t){e.exports=i},function(e,t){e.exports=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(0),c=n(p),l=r(1),f=n(l),d=r(12),h=n(d),y=r(13),b=n(y),g={height:c.default.number.isRequired,keyProp:c.default.string.isRequired,labelProp:c.default.string.isRequired,links:c.default.array.isRequired,nodes:c.default.array.isRequired,nodeClassName:c.default.string,nodeOffset:c.default.number.isRequired,nodeRadius:c.default.number.isRequired,width:c.default.number.isRequired,circleProps:c.default.object.isRequired,gProps:c.default.object.isRequired,pathProps:c.default.object.isRequired,svgProps:c.default.object.isRequired,textProps:c.default.object.isRequired},m=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"render",value:function(){var e=this;return f.default.createElement("svg",a({},this.props.svgProps,{height:this.props.height,width:this.props.width}),this.props.links.map(function(t){return f.default.createElement(h.default,{key:t.target.data[e.props.keyProp],keyProp:e.props.keyProp,source:t.source,target:t.target,x1:t.source.x,x2:t.target.x,y1:t.source.y,y2:t.target.y,pathProps:Object.assign({},e.props.pathProps,t.target.data.pathProps)})}),this.props.nodes.map(function(t){return f.default.createElement(b.default,a({key:t.data[e.props.keyProp],keyProp:e.props.keyProp,labelProp:e.props.labelProp,offset:e.props.nodeOffset,radius:e.props.nodeRadius,x:t.x,y:t.y,circleProps:Object.assign({},e.props.circleProps,t.data.circleProps),gProps:Object.assign({},e.props.gProps,t.data.gProps),textProps:Object.assign({},e.props.textProps,t.data.textProps)},t.data))}))}}]),t}(f.default.PureComponent);t.default=m,m.propTypes=g},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r,n){return"M"+t+","+e+"C"+(t+n)/2+","+e+" "+(t+n)/2+","+r+" "+n+","+r}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),l=n(c),f=r(1),d=n(f),h={source:l.default.object.isRequired,target:l.default.object.isRequired,keyProp:l.default.string.isRequired,x1:l.default.number.isRequired,x2:l.default.number.isRequired,y1:l.default.number.isRequired,y2:l.default.number.isRequired,pathProps:l.default.object.isRequired},y=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleClick=r.handleClick.bind(r),r}return s(t,e),p(t,[{key:"handleClick",value:function(e){this.props.pathProps.onClick&&this.props.pathProps.onClick(this.props.source.data[this.props.keyProp],this.props.target.data[this.props.keyProp],e)}},{key:"render",value:function(){var e=a(this.props.x1,this.props.y1,this.props.x2,this.props.y2);return d.default.createElement("path",u({},this.props.pathProps,{d:e,onClick:this.handleClick}))}}]),t}(d.default.PureComponent);t.default=y,y.propTypes=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(0),c=n(p),l=r(1),f=n(l),d={x:c.default.number.isRequired,y:c.default.number.isRequired,keyProp:c.default.string.isRequired,labelProp:c.default.string.isRequired,offset:c.default.number.isRequired,radius:c.default.number.isRequired,circleProps:c.default.object.isRequired,gProps:c.default.object.isRequired,textProps:c.default.object.isRequired},h=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleClick=r.handleClick.bind(r),r}return s(t,e),u(t,[{key:"handleClick",value:function(e){this.props.gProps.onClick&&this.props.gProps.onClick(this.props[this.props.keyProp],e)}},{key:"getTransform",value:function(){return"translate("+this.props.y+", "+this.props.x+")"}},{key:"render",value:function(){return f.default.createElement("g",a({},this.props.gProps,{transform:this.getTransform(),onClick:this.handleClick}),f.default.createElement("circle",a({},this.props.circleProps,{r:this.props.radius})),f.default.createElement("text",a({},this.props.textProps,{dx:this.props.radius+.5,dy:this.props.offset}),this.props[this.props.labelProp]))}}]),t}(f.default.PureComponent);t.default=h,h.propTypes=d}])});